package DAO;

import java.io.IOException;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import DTO.Vaccresv;

public class VaccresvDAO {
	Connection conn = null;
	PreparedStatement ps = null;
	ResultSet rs = null;
	
	public static Connection getConnection() throws Exception {
		Class.forName("oracle.jdbc.OracleDriver");
		Connection con = DriverManager.getConnection
				("jdbc:oracle:thin:@//localhost:1521/xe", "system", "sys1234");
		
		return con;
	}
	
	
	public int insert(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		Vaccresv vacc = new Vaccresv();
		
		int result = 0;
		
		vacc.setResvno(request.getParameter("resvno"));
		vacc.setJumin(request.getParameter("jumin"));
		vacc.setVcode(request.getParameter("vcode"));
		vacc.setHcode(request.getParameter("hcode"));
		vacc.setResvdate(request.getParameter("resvdate"));
		vacc.setResvtime(request.getParameter("resvtime"));
		
		try {
			conn = getConnection();
			ps = conn.prepareStatement("insert into TBL_VACCRESV_202108 values (?, ?, ?, ?, ?, ?)");
			
			ps.setString(1, vacc.getResvno());
			ps.setString(2, vacc.getJumin());
			ps.setString(3, vacc.getVcode());
			ps.setString(4, vacc.getHcode());
			ps.setString(5, vacc.getResvdate());
			ps.setString(6, vacc.getResvtime());
			
			result = ps.executeUpdate();
			
			System.out.println(result);
			
			conn.close();
			ps.close();
			
		} catch (Exception e) {
			e.printStackTrace();
		}
		return result;
	}
	
}
